!function(){"undefined"!=typeof window&&(window.exports={},window.module={})}(),function(){"use strict";function newEl(tag,opt){var el=document.createElement(tag);for(var prop in opt)if(opt.hasOwnProperty(prop))if("style"===prop)for(var styleProp in opt[prop])el[prop][styleProp]=opt[prop][styleProp];else el[prop]=opt[prop];return el}function runCallbacks(){callbacks.forEach(function(callback){callback(finalScore)})}function getMedianScore(){if(scores.length){var midPoint=Math.floor(scores.length/2),result=void 0;return scores.sort(),result=scores.length%2?scores[midPoint]:(scores[midPoint-1]+scores[midPoint])/2,Math.round(result)}}function log(str){if(!getEl("#logging-panel")){var logEl=newEl("div",{id:"logging-panel",style:{position:"fixed",width:"300px",height:"260px",bottom:"10px",left:"10px",padding:"10px",background:"#111","font-family":"monospace","font-size":"12px","line-height":"14px",color:"#eee",overflow:"auto","box-shadow":"2px 2px 20px rgba(0, 0, 0, 0.5)","z-index":"99"}}),logH1=newEl("h1",{textContent:"Fireball"});logEl.appendChild(logH1);var logMedian=newEl("p",{id:"log-median"});logEl.appendChild(logMedian);var logDiv=newEl("div",{id:"log"});logEl.appendChild(logDiv),getEl("body").appendChild(logEl)}var log=getEl("#log");"_finished_"===str?(getEl("#log-median").textContent="Score: "+getMedianScore().toLocaleString(),log.style.color="grey"):log.innerHTML+="<p> > "+str+" </p>"}function appendClasses(options){var i=void 0,className=options.speedRanges[0].className;for(i=1;i<options.speedRanges.length;i++)finalScore>=options.speedRanges[i].min&&(className=options.speedRanges[i].className);if(options.speedRanges.forEach(function(speedRange){finalScore>=speedRange.min&&(className=speedRange.className)}),className){var classSelector=options.classEl||"body",classEl=getEl(classSelector);classEl&&classEl.classList.add(className)}}function run(){function logScore(rawScore){var thisScore=parseInt(6.1813*rawScore,10);scores.push(thisScore),finalScore=getMedianScore(),count++,debug&&log(finalScore.toLocaleString()),runs>count?setTimeout(function(){fbWorker.postMessage("run")},100):(hasFinished=!0,runCallbacks(),debug&&log("_finished_"),options.speedRanges&&appendClasses(options),options.callback&&options.callback())}var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(finalScore=options.defaultScore||0,!window.Worker)return void(options.callback&&options.callback());var debug=options.debug||!1,runs=options.runs||7,count=0,blobURL=URL.createObjectURL(new Blob(["("+fireballWorker.toString()+")()"],{type:"application/javascript"})),fbWorker=new Worker(blobURL);URL.revokeObjectURL(blobURL),fbWorker.addEventListener("message",function(e){logScore(e.data)},!1),fbWorker.postMessage("run")}function getScore(){return finalScore}function onSuccess(callback){hasFinished?callback(finalScore):callbacks.push(callback)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.run=run,exports.getScore=getScore,exports.onSuccess=onSuccess;var callbacks=[],finalScore=0,hasFinished=!1,scores=[],getEl=function(selector){return document.querySelector(selector)},fireballWorker=function(){function runTest(){for(var OPS=1e6,startTime=(new Date).valueOf(),i=0;OPS>i;i++)/=/.exec("111soqs57qo8o8480qo18sor2011r3n591q7s6s37r120904"),/=/.exec("SbeprqRkcvengvba=633669315660164980"),/=/.exec("FrffvbaQQS2=111soqs57qo8o8480qo18sor2011r3n591q7s6s37r120904");var endTime=(new Date).valueOf();return OPS/(endTime-startTime)}self.addEventListener("message",function(){self.postMessage(runTest())},!1)}}(),function(){"undefined"!=typeof window&&(window.Fireball=module.exports||exports.default||exports)}();